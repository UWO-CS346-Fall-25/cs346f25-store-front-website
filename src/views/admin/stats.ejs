
<div style="margin-top:1rem;">
  <div style="display:flex;gap:1rem;align-items:center;">
    <div><strong>Total DB calls:</strong> <span id="total-calls">0</span></div>
    <div>
      <label for="minutes">Window:</label>
      <select id="minutes">
        <option value="15">15m</option>
        <option value="60" selected>60m</option>
        <option value="240">4h</option>
        <option value="1440">24h</option>
      </select>
    </div>
    <div>
      
      <form
        method="post"
        action="/admin/stats/reset"
        class="admin-inline-form"
        onsubmit="return confirm('Reset database statistics? This cannot be undone.');">
        <% if (csrfToken) { %>
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
        <% } %>
        <span class="helper-popup" tabindex="0" aria-haspopup="true">
          <%- include('../partials/confirm-button', {
            btnClasses: 'link link--danger admin-delete-link link--icon',
            iconName: 'admin-reset',
            label: 'Reset Database Stats',
            modalTitle: 'Reset Database Stats',
            modalBody: 'Reset database statistics? This cannot be undone.',
            confirmText: 'Reset',
            cancelText: 'Cancel'
          }) %>
          <span class="helper-popup__text" role="tooltip">Reset</span>
        </span>
      </form>
    </div>
  </div>

  <div style="margin-top:1rem;">
    <canvas id="dbChart" width="800" height="300" aria-label="DB calls chart"></canvas>
  </div>
</div>
<!-- Chart.js from CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
